# Work-flow решения задач

## Содержание
* [Начало работы](#Начало-работы)
* [Процесс](#Процесс)
* [Отправка ПР и прохождение ревью](#Отправка-ПР-и-прохождение-ревью)
* [Окончание работы](#Окончание-работы)
* [Тестирование](#Тестирование)

## Начало работы
Любую задачу, вне зависимости от ее типа (ошибка, разработка), вы получаете в виде ссылки на задачу, заведенную в системе [JIRA](https://jira.railsc.ru).
Если у Вас еще нет доступа к Жире, попросите Вашего ПМ организовать вам доступ.


Любая задача в Жире имеет ссылку такого вида: https://jira.railsc.ru/browse/*TASK_ID*, где *TASK_ID* - id задачи, к примеру, *PC4-15157*.
Как только вы приступаете к выполнению задачи, вам необходимо создать свою ветку *feature/TASK_ID* (или *fix/TASK_ID*) в проекте/геме, в который необходимо внести изменения.
Это делается для того, чтобы в жире сформировалась связь с вашим пул-реквестом. Рекомендуется сначала обновить код вашего проекта из upstream для уменьшения вероятности конфликтов.
[Подробней о именовании веток читай тут](https://github.com/abak-press/guides/tree/master/abak-flow#Именование-веток)

Когда вы начинаете выполнять задачу, необходимо изменить ее статус на **"В работе"**.

Предположим Вам дали такую задачу https://jira.railsc.ru/browse/PC4-15157 и она требует изменения кода в геме gem1, и в проекте project1.

Ваши действия:

* Сделать свой форк исходного кода на гитхабе для гема и проекта
* Клонировать репозиторий

```
git clone git@github.com:dsalahutdinov/project1.git
cd project1
git remote add upstream git@github.com:abak-press/project1.git
```

Или обновить исходный код ветки, на основе которой вы будете начинать работать

`git pull upstream develop`

* Создать свою ветку

`git checkout -b feature/PC4-15157`

## Процесс
Внимательно прочитайте задачу. Если у Вас возникли вопросы, вы можете задать из ПМу или аналитику вашего проекта.
Вероятнее всего первые задачи, которые вы получите - это исправление ошибок. Поэтому чтобы исправить ошибку Вам необходимо разобраться в текущей логике и понять
корректную логику работы (обычно описыватеся в задаче).

## Отправка ПР и прохождение ревью
После внесения изменений в код (в ваш форк исходного кода) вым необходимо отправить пул-реквест в основной репозитарий. После отправки ПР, выставляете статус **"Отправлен ПР"** в Жире.

Каждый ПР проходит ревью другими разработчиками, которые анализируют вашу работу и указывают на недостатки. Поэтому будте готовы, что что-то прийдется исправить. Обсуждение вашего ПР
происходит на гитхабе.

Любые доработки по вашему ПР вы делаете дополнительным коммитом, чтобы не приходилось по новой пересматривать Ваш ПР.

## Окончание работы
После окончания работы на ПР, устранением всех недостатков, вам необходимо скомпоновать все коммиты и один, это делается при помощи команды *rebase*:

`git rebase -i HEAD~3`

в зависимости кол-ва коммитов вы ставите соответствующую цифру.

После принятия вашего ПР и простановки статуса **"Разрешен"** в Жире, задача считается выполненной.

## Тестирование
Далее задача идет на тестирование. У тестировщика могут возникнуть вопросы, которые он задаст Вам. Если все в порядке, задачу закрывают (статус **"Закрыт"**). Если нет - переоткрывают и вы начинаете новый цикр работы над ней.
